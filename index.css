@tailwind base;
@tailwind components;
@tailwind utilities;

@media print {
  /* 1. FORCE EXACT COLORS & DIMENSIONS */
  * {
    -webkit-print-color-adjust: exact !important;
    print-color-adjust: exact !important;
    color-adjust: exact !important;
    box-shadow: none !important;
    text-shadow: none !important;
  }

  /* 2. PAGE SETUP */
  @page {
    margin: 10mm;
    size: A4;
  }

  html, body {
    height: auto !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
    background: white;
    overflow: visible !important;
  }

  /* 3. HIDE UI ELEMENTS */
  body * {
    visibility: hidden;
    height: 0;
  }

  /* 4. SHOW PAPER CONTENT */
  #exam-paper-content, 
  #exam-paper-content * {
    visibility: visible;
    height: auto;
  }

  #exam-paper-content {
    position: absolute !important;
    left: 0 !important;
    top: 0 !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important; 
    display: block !important;
  }

  /* 5. IMAGE STABILITY */
  img, svg {
    /* Images should NEVER split */
    break-inside: avoid;
    display: block;
    max-width: 100%;
    object-fit: contain; 
  }

  /* 6. LAYOUT FLOW - THE FIX */
  
  /* Allow the Flow Root to break naturally */
  .flow-root {
    break-inside: auto;
  }

  /* CRITICAL FIX: Allow questions to split across pages to save space */
  .question-block {
     break-inside: auto; 
     page-break-inside: auto;
     display: block; /* Ensure it behaves like a block for breaking */
  }

  /* But keep specific "Answer" lines together if possible, or small chunks */
  .keep-together {
    break-inside: avoid;
  }

  /* 7. TABLE HANDLING */
  table {
    /* Allow tables to split if they are huge */
    break-inside: auto;
    width: 100%;
  }
  
  /* Ensure a specific ROW doesn't get sliced in half */
  tr {
    break-inside: avoid;
    page-break-inside: avoid;
  }

  /* Headings shouldn't be the last thing on a page */
  h3, h4, .section-header {
    break-after: avoid;
  }
}

